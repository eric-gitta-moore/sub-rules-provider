# curl https://github.com/caddyserver/caddy/releases/download/v2.10.2/caddy_2.10.2_linux_amd64.tar.gz -L | tar xzvf -

{
	http_port 8080
	https_port 8443
}

(myApp) {
	tls internal
	# vless+wss
	handle_path /v1/realtime/* {
		# 注意：这里必须写 https:// 协议头，否则 Caddy 默认走 http
		reverse_proxy https://singbox:11023 {
			transport http {
				tls_insecure_skip_verify
			}
		}
	}

	# vmess+wss
	handle_path /v2/realtime/* {
		# 注意：这里必须写 https:// 协议头，否则 Caddy 默认走 http
		reverse_proxy https://singbox:11024 {
			transport http {
				tls_insecure_skip_verify
			}
		}
	}

	# vmess+quic
	handle_path /v1/chat/* {
		reverse_proxy https://singbox:11025 {
			transport http {
				tls_insecure_skip_verify
			}
		}
	}

	# 3. 默认兜底 (可选)
	handle {
		root * /etc/caddy
		try_files {path} /index.html
		file_server
	}
}

a.cc:29023, a.cc:443 {
	tls internal
	import myApp
}

http://a.cc:29080 {
	import myApp
}